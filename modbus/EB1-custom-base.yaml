# /config/files/modbus.yaml
# edpbox1

#modbus:

  - name: edpbox1
    type: tcp
    host: 10.3.0.223
    port: 9988
    timeout: 3
    retries: 9
    retry_on_empty: true # to be fixed
    #       #        #  in pymodbus 2.5.3?

    sensors:

# for use in templates

      - name: "EB1 0x0001" # Clock
        slave: 1
        address: 1
        input_type: input
        count: 1
        data_type: custom
        register_size: 12
        structure: ">H7BhB"
        scan_interval: 31

      - name: "EB1 0x000B" # Tariff
        slave: 1
        address: 11
        input_type: input
        count: 1
        data_type: custom
        structure: ">Bx"
        scan_interval: 32

      - name: "EB1 0x006C" # V/A
        slave: 1
        address: 108
        input_type: input
        count: 2
        data_type: custom
        structure: ">2H"
        scan_interval: 33

      - name: "EB1 0x0079" # Power
        slave: 1
        address: 121
        input_type: input
        count: 2
        data_type: custom
        register_size: 4
        structure: ">2L"
        scan_interval: 34

      - name: "EB1 0x007B" # PF
        slave: 1
        address: 123
        input_type: input
        count: 1
        data_type: uint16
        scan_interval: 35

      - name: "EB1 0x007F" # Freq
        slave: 1
        address: 127
        input_type: input
        count: 1
        data_type: uint16
        scan_interval: 36

      - name: "EB1 0x0026" # TotEneTariff
        slave: 1
        address: 38
        input_type: input
        count: 3
        data_type: custom
        register_size: 4
        structure: ">3L"
        scan_interval: 37

      - name: "EB1 0x0016" # TotEne I/E/Q
        slave: 1
        address: 22
        input_type: input
        count: 2
        data_type: custom
        register_size: 4
        structure: ">2L"
        scan_interval: 38

# full sensor

#      - name: "EB1 Firmware Core"
#        slave: 1
#        address: 4
#        input_type: input
#        count: 1
#        data_type: string
#        scan_interval: 301

#      - name: "EB1 Firmware App"
#        slave: 1
#        address: 5
#        input_type: input
#        count: 1
#        data_type: string
#        scan_interval: 302

#      - name: "EB1 Firmware Com"
#        slave: 1
#        address: 6
#        input_type: input
#        count: 1
#        data_type: string
#        scan_interval: 303

# EOF
