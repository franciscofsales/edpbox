# eb2mono

  - platform: mqtt
    name: "EB2 ESP Uptime"
    unique_id: EB2_ESP_Uptime
    state_topic: "tele/edpbox2/STATE"
    value_template: '{{ ( value_json.UptimeSec / 3600 ) | round(1) }}'
    unit_of_measurement: "h"
    icon: mdi:alarm

  - platform: mqtt
    name: "EB2 ESP Free Heap"
    unique_id: EB2_ESP_Heap
    state_topic: "tele/edpbox2/STATE"
    value_template: '{{ value_json.Heap }}'
    unit_of_measurement: "kB"
    icon: mdi:chip

  - platform: mqtt
    name: "EB2 ESP Signal"
    unique_id: EB2_ESP_Signal
    state_topic: "tele/edpbox2/STATE"
    value_template: '{{ value_json.Wifi.Signal }}'
    unit_of_measurement: "dB"
    device_class: signal_strength

# eof esp

  - platform: mqtt
    name: "EB2 Clock H"
    unique_id: EB2_Clock_H
    state_topic: "tele/edpbox2/SENSOR"
    value_template: '{{ value_json.EB2.Clock_H|int }}'
    icon: mdi:clock
    unit_of_measurement: h

  - platform: mqtt
    name: "EB2 Clock M"
    unique_id: EB2_Clock_M
    state_topic: "tele/edpbox2/SENSOR"
    value_template: '{{ value_json.EB2.Clock_M|int }}'
    icon: mdi:clock
    unit_of_measurement: m

  - platform: mqtt
    name: "EB2 Clock S"
    unique_id: EB2_Clock_S
    state_topic: "tele/edpbox2/SENSOR"
    value_template: '{{ value_json.EB2.Clock_S|int }}'
    icon: mdi:clock
    unit_of_measurement: "s"

  - platform: mqtt
    name: "EB2 Voltage L1"
    unique_id: eb2ten1
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.VolL1|float }}
    unit_of_measurement: "V"
    device_class: voltage 

  - platform: mqtt
    name: "EB2 Current"
    unique_id: eb2cursum
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.Current|float }}
    unit_of_measurement: "A"
    device_class: current

  - platform: mqtt
    name: "EB2 Current L1"
    unique_id: eb2cur1
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.CurL1|float }}
    unit_of_measurement: "A"
    device_class: current

  - platform: mqtt
    name: "EB2 Power Factor"
    unique_id: eb2pfactor
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.PowFac|float }}
    unit_of_measurement: "pu"
    device_class: power_factor

  - platform: mqtt
    name: "EB2 Power Factor L1"
    unique_id: eb2pfactorl1
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.PowFacL1|float }}
    unit_of_measurement: "pu"
    device_class: power_factor

  - platform: mqtt
    name: "EB2 Active Power"
    unique_id: eb2powerp1
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.ActPow|int }}
    unit_of_measurement: "W"
    device_class: power

  - platform: mqtt
    name: "EB2 Active Power L1"
    unique_id: eb2powerl1
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.ActPowL1|int }}
    unit_of_measurement: "W"
    device_class: power

  - platform: mqtt
    name: "EB2 Frequency"
    unique_id: eb2freq
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.Frequency|float }}
    unit_of_measurement: "Hz"
    icon: mdi:pulse

  - platform: mqtt
    name: "EB2 Total Energy T1 Vazio"
    unique_id: eb2energy1
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.TotEneT1|float }}
    unit_of_measurement: "kWh"
    icon: mdi:transmission-tower
   
  - platform: mqtt
    name: "EB2 Total Energy T2 Ponta"
    unique_id: eb2energy2
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.TotEneT2|float }}
    unit_of_measurement: "kWh"
    icon: mdi:transmission-tower
    
  - platform: mqtt
    name: "EB2 Total Energy T3 Cheia"
    unique_id: eb2energy3
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.TotEneT3|float }}
    unit_of_measurement: "kWh"
    icon: mdi:transmission-tower

  - platform: mqtt
    name: "EB2 Total Energy Import"
    unique_id: eb2energysum
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.TotEneImp|float }}
    unit_of_measurement: "kWh"
    device_class: energy

  - platform: mqtt
    name: "EB2 Total Energy Export"
    unique_id: eb2energyexport
    state_topic: "tele/edpbox2/SENSOR"
    value_template: >-
        {{ value_json.EB2.TotEneExp|float }}
    unit_of_measurement: "kWh"
    device_class: energy

###
##
#
