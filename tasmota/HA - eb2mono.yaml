# eb2mono

  - platform: mqtt
    name: "EB1 ESP Uptime"
    unique_id: EB1_ESP_Uptime
    state_topic: "tele/edpbox1/STATE"
    availability_topic: "tele/edpbox1/LWT"
    payload_available: Online
    payload_not_available: Offline
    value_template: '{{ ( value_json.UptimeSec / 3600 ) | round(1) }}'
    unit_of_measurement: "h"
    icon: mdi:alarm
    expire_after: 120

  - platform: mqtt
    name: "EB1 ESP Free Heap"
    unique_id: EB1_ESP_Heap
    state_topic: "tele/edpbox1/STATE"
    availability_topic: "tele/edpbox1/LWT"
    payload_available: Online
    payload_not_available: Offline
    value_template: '{{ value_json.Heap }}'
    unit_of_measurement: "kB"
    icon: mdi:chip

  - platform: mqtt
    name: "EB1 ESP Signal"
    unique_id: EB1_ESP_Signal
    state_topic: "tele/edpbox1/STATE"
    availability_topic: "tele/edpbox1/LWT"
    payload_available: Online
    payload_not_available: Offline
    value_template: '{{ value_json.Wifi.Signal }}'
    unit_of_measurement: "dB"
    device_class: signal_strength
    expire_after: 120

  - platform: mqtt
    name: "EB1 ESP Vcc"
    unique_id: EB1_ESP_Vcc
    state_topic: "tele/edpbox1/STATE"
    availability_topic: "tele/edpbox1/LWT"
    payload_available: Online
    payload_not_available: Offline
    value_template: '{{ value_json.Vcc }}'
    unit_of_measurement: "V"
    icon: mdi:chip

  - platform: mqtt
    name: "EB1 ESP Load"
    unique_id: EB1_ESP_Load
    state_topic: "tele/edpbox1/STATE"
    availability_topic: "tele/edpbox1/LWT"
    payload_available: Online
    payload_not_available: Offline
    value_template: '{{ value_json.LoadAvg }}'
    unit_of_measurement: "%"
    icon: mdi:chip

# eof esp

  - platform: mqtt
    name: "EB1 Clock H"
    unique_id: EB1_Clock_H
    state_topic: "tele/edpbox1/SENSOR"
    availability_topic: "tele/edpbox1/LWT"
    payload_available: Online
    payload_not_available: Offline
    value_template: '{{ value_json.EB1.Clock_H|int }}'
    icon: mdi:clock
    unit_of_measurement: h
    expire_after: 120

  - platform: mqtt
    name: "EB1 Clock M"
    unique_id: EB1_Clock_M
    state_topic: "tele/edpbox1/SENSOR"
    availability_topic: "tele/edpbox1/LWT"
    payload_available: Online
    payload_not_available: Offline
    value_template: '{{ value_json.EB1.Clock_M|int }}'
    icon: mdi:clock
    unit_of_measurement: m
    expire_after: 120

  - platform: mqtt
    name: "EB1 Clock S"
    unique_id: EB1_Clock_S
    state_topic: "tele/edpbox1/SENSOR"
    availability_topic: "tele/edpbox1/LWT"
    payload_available: Online
    payload_not_available: Offline
    value_template: '{{ value_json.EB1.Clock_S|int }}'
    icon: mdi:clock
    unit_of_measurement: "s"
    expire_after: 30

  - platform: mqtt
    name: "EB1 Voltage L1"
    unique_id: ebten1
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.VolL1|float }}
    unit_of_measurement: "V"
    device_class: voltage 
    expire_after: 60

  - platform: mqtt
    name: "EB1 Current"
    unique_id: ebcursum
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.Current|float }}
    unit_of_measurement: "A"
    device_class: current
    expire_after: 30

  - platform: mqtt
    name: "EB1 Current L1"
    unique_id: ebcur1
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.CurL1|float }}
    unit_of_measurement: "A"
    device_class: current
    expire_after: 30

  - platform: mqtt
    name: "EB1 Power Factor"
    unique_id: ebpfactor
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.PowFac|float }}
    unit_of_measurement: "pu"
    device_class: power_factor
    expire_after: 60

  - platform: mqtt
    name: "EB1 Power Factor L1"
    unique_id: ebpfactorl1
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.PowFacL1|float }}
    unit_of_measurement: "pu"
    device_class: power_factor
    expire_after: 60

  - platform: mqtt
    name: "EB1 Active Power"
    unique_id: ebpowerp1
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.ActPow|int }}
    unit_of_measurement: "W"
    device_class: power
    expire_after: 30

  - platform: mqtt
    name: "EB1 Active Power L1"
    unique_id: ebpowerl1
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.ActPowL1|int }}
    unit_of_measurement: "W"
    device_class: power
    expire_after: 30


  - platform: mqtt
    name: "EB1 Frequency"
    unique_id: ebfreq
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.Frequency|float }}
    unit_of_measurement: "Hz"
    icon: mdi:pulse

  - platform: mqtt
    name: "EB1 Total Energy T1 Vazio"
    unique_id: ebenergy1
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.TotEneT1|float }}
    unit_of_measurement: "kWh"
    icon: mdi:transmission-tower
   
  - platform: mqtt
    name: "EB1 Total Energy T2 Ponta"
    unique_id: ebenergy2
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.TotEneT2|float }}
    unit_of_measurement: "kWh"
    icon: mdi:transmission-tower
    
  - platform: mqtt
    name: "EB1 Total Energy T3 Cheia"
    unique_id: ebenergy3
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.TotEneT3|float }}
    unit_of_measurement: "kWh"
    icon: mdi:transmission-tower

  - platform: mqtt
    name: "EB1 Total Energy Import"
    unique_id: ebenergysum
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.TotEneImp|float }}
    unit_of_measurement: "kWh"
    device_class: energy

  - platform: mqtt
    name: "EB1 Total Energy Export"
    unique_id: ebenergyexport
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.TotEneExp|float }}
    unit_of_measurement: "kWh"
    device_class: energy

  - platform: mqtt
    name: "EB1 Total Energy Q1"
    unique_id: ebenergyq1
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.TotEneQ1|float }}
    unit_of_measurement: "kVAr"
    device_class: energy

  - platform: mqtt
    name: "EB1 Total Energy Q4"
    unique_id: ebenergyq4
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.TotEneQ4|float }}
    unit_of_measurement: "kVAr"
    device_class: energy

  - platform: mqtt
    name: "EB1 Tariff"
    unique_id: eb1tariff
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.Tariff|int }}
    unit_of_measurement: "T"
    icon: 'mdi:counter'
    
  - platform: mqtt
    name: "EB1 DCP"
    unique_id: eb1dcp
    state_topic: "tele/edpbox1/SENSOR"
    value_template: >-
        {{ value_json.EB1.DCP|int }}
    unit_of_measurement: "S"
    icon: 'mdi:cog-refresh'

###
##
#
